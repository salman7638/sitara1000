<odoo>
  <data>
      
        <record id="sale_order_form_view_payments" model="ir.ui.view">
			<field name="name">sale.order.form.view.payments</field>
			<field name="model">sale.order</field>
			<field name="inherit_id" ref="sale.view_order_form"/>
			 <field name="arch" type="xml">
                <xpath expr="//field[@name='state']" position="replace">
                    <field name="state" widget="statusbar" statusbar_visible="draft,sent,booked,sale"/>
                </xpath>                  
                <xpath expr="//header" position="inside">
                    
                      <button name="action_register_payment"  type="object" string="Register Payment" attrs="{'invisible': ['!', ('state', 'in', ['done','cancel']),('amount_residual','&lt;=', 0)]}"  class="oe_highlight" />
                    
                      <button name="action_confirm_booking"  type="object" string="Confirm Booking" invisible='1'  />
                    
                      <button name="action_register_allottment"  type="object" string="Confirm Allottment"  invisible='1'  class="oe_highlight" />   
                    
                      <button name="action_generate_installment"  type="object" string="Generate Installment"  attrs="{'invisible': ['|', ('state', 'not in', ['sale']),('installment_created','=',True)]}" class="oe_highlight" />
                    
                </xpath>                 
                 <xpath expr="//header//button[@name='action_confirm']" position="replace">
                     <button name="action_confirm" data-hotkey="v" string="Confirm" type="object"  invisible='1'/>
                 </xpath>
                 
                <xpath expr="//button[@name='action_confirm']" position="attributes">
                    <attribute name='invisible'>1</attribute>
                </xpath> 
                 <xpath expr="//button[@name='action_quotation_send']" position="attributes">
                    <attribute name='invisible'>1</attribute>
                </xpath> 
                <xpath expr="//field[@name='partner_id']" position="after">
                    <field name="amount_paid" />
                    <field name="installment_created"  invisible='1'/>
                    <field name="amount_residual" readonly='1'/>
                    <field name="create_date" invisible='1'/>
                    <field name="received_percent" invisible='1' />
                </xpath>    
                 
                <xpath expr="//field['order_line']//tree//field[@name='price_subtotal']" position="before">
                    <field name="comission_amount" />
                </xpath>    
                 
                <xpath expr="//div[@name='button_box']" position="inside">
                     <button name="action_view_payments" type="object" class="oe_stat_button" state='done' icon="fa-pencil-square-o"  attrs="{'invisible': [('bill_count', '=', 0)]}">
                        <field name="bill_count" widget="statinfo" string="Payments"/>
                     </button>  
                </xpath>
                 <xpath expr="//notebook" position="inside">
                     <page string='Installments' >
                      <field name="installment_line_ids" readonly='1'>
                         <tree >
                            <field name="name" /> 
                            <field name="date" /> 
                            <field name="payment_date" /> 
                            <field name="amount_paid" />  
                            <field name="amount_residual" />   
                            <field name="remarks" />   
                            <field name="order_id" invisible='1' />    
                         </tree>                         
                     </field> 
                   </page>      
                </xpath>
                 
             </field>
          </record> 
      
  </data>
</odoo>